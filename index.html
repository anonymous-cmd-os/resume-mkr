<!DOCTYPE html>
<!-- saved from url=(0046)file:///C:/Users/kapil/OneDrive/Desktop/2.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>âœ¨ AI-Powered Creative Resume &amp; Portfolio Maker âœ¨</title>
    <!-- External Libraries -->
    <link rel="stylesheet" href="./index_files/all.min.css">
    <link href="./index_files/css2" rel="stylesheet">
    <script src="./index_files/html2pdf.bundle.min.js.download"></script>
    
    <style>        
        /* Preview Modal Styles */
.preview-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    z-index: 1000;
    overflow-y: auto;
}

.preview-container {
    background: white;
    max-width: 1000px;
    margin: 20px auto;
    padding: 20px;
    border-radius: 15px;
    position: relative;
}

.preview-controls {
    position: sticky;
    top: 0;
    background: white;
    padding: 15px;
    border-bottom: 2px solid var(--primary-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
    z-index: 100;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.preview-actions {
    display: flex;
    gap: 10px;
}

.preview-size-controls {
    display: flex;
    align-items: center;
    gap: 15px;
}

.preview-size {
    display: flex;
    align-items: center;
    gap: 5px;
}

.close-preview {
    position: absolute;
    top: 10px;
    right: 10px;
    background: var(--primary-color);
    color: white;
    border: none;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: var(--transition);
}

.close-preview:hover {
    background: var(--secondary-color);
    transform: scale(1.1);
}

.preview-content {
    transition: transform 0.3s ease;
}

/* Preview Theme Switcher */
.theme-switcher {
    display: flex;
    gap: 10px;
    margin: 10px 0;
}

.theme-option {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    cursor: pointer;
    border: 2px solid transparent;
    transition: var(--transition);
}

.theme-option.active {
    border-color: var(--primary-color);
    transform: scale(1.1);
}

/* Screen Size Previews */
.size-desktop .preview-content { transform: scale(1); }
.size-tablet .preview-content { transform: scale(0.8); }
.size-mobile .preview-content { transform: scale(0.6); }
        /* Core Variables and Reset */
        :root {
            --primary-color: #6c5ce7;
            --secondary-color: #a8a4e6;
            --accent-color: #fd79a8;
            --background-color: #f9f7ff;
            --text-color: #2d3436;
            --shadow: 0 4px 6px rgba(108, 92, 231, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Navigation and Header */
        nav {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            padding: 1.5rem;
            color: white;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        nav h1 {
            text-align: center;
            font-size: 2rem;
            font-weight: 600;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 20px;
        }

        /* Progress Bar */
        .progress-container {
            margin: 2rem 0;
            padding: 1rem;
            background: white;
            border-radius: 15px;
            box-shadow: var(--shadow);
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .step {
            display: flex;
            align-items: center;
            flex-direction: column;
            position: relative;
            flex: 1;
        }

        .step-circle {
            width: 30px;
            height: 30px;
            background: white;
            border: 3px solid #ddd;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 1;
            transition: var(--transition);
        }

        .step.active .step-circle {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }

        /* Profile Picture Styles */
        .profile-picture-container {
            margin: 20px 0;
            text-align: center;
        }

        .profile-picture-preview {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            border: 3px solid var(--primary-color);
            object-fit: cover;
            margin: 10px auto;
            box-shadow: var(--shadow);
        }

        .profile-picture-upload {
            display: none;
        }

        .upload-btn {
            background: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: var(--transition);
            display: inline-block;
            margin-top: 10px;
        }

        .upload-btn:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        /* AI Suggestions Styles */
        .ai-suggestions {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: var(--shadow);
        }

        .suggestion-card {
            border: 1px solid #eee;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
        }

        .suggestion-card:hover {
            border-color: var(--primary-color);
            background: var(--background-color);
        }

        /* Form Styles */
        .form-container {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
        }

        .form-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border-radius: 10px;
            background: #fafafa;
            transition: var(--transition);
        }

        .input-group {
            margin-bottom: 1.5rem;
        }

        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .input-group input,
        .input-group textarea {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #eee;
            border-radius: 8px;
            font-size: 1rem;
            transition: var(--transition);
        }

        .input-group input:focus,
        .input-group textarea:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.1);
        }
                /* Button Styles */
        .cute-btn {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .cute-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        /* Resume Template Styles */
        .resume-modern {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px;
            font-family: 'Poppins', sans-serif;
        }

        .resume-modern header {
            text-align: center;
            margin-bottom: 40px;
        }

        .resume-modern .profile-img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            margin-bottom: 20px;
            object-fit: cover;
            border: 3px solid var(--primary-color);
        }

        .resume-modern section {
            margin-bottom: 30px;
        }

        .resume-modern .experience-item,
        .resume-modern .education-item {
            margin-bottom: 20px;
        }

        .resume-modern h4 {
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .resume-modern h5 {
            color: var(--secondary-color);
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .template-card.selected {
            border: 2px solid var(--primary-color);
            transform: translateY(-5px);
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .error {
            color: #ff4757;
            padding: 10px;
            border-radius: 5px;
            background: #ffe7e7;
            margin: 10px 0;
        }

        /* Template Selection */
        .template-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .template-card {
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .template-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 8px 15px rgba(108, 92, 231, 0.2);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .template-selection {
                grid-template-columns: 1fr;
            }

            .form-section {
                padding: 1rem;
            }

            .cute-btn {
                padding: 0.8rem 1.5rem;
            }
        }
        /* Add to your existing CSS */
.preview-content {
    background: white;
    min-height: 297mm; /* A4 height */
    width: 210mm; /* A4 width */
    margin: 0 auto;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
}

.resume-modern {
    background: white;
    position: relative;
}

/* Ensure all content is visible in the PDF */
.resume-modern * {
    page-break-inside: avoid;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
}

/* Improve text readability */
.resume-modern p,
.resume-modern li {
    margin-bottom: 0.5em;
    line-height: 1.6;
}

.resume-modern section {
    margin-bottom: 1.5em;
    page-break-inside: avoid;
}
    </style>
</head>
<body>
    <nav>
         <div class="signature">@coded_by_kapil_kumar</div>
        <h1>âœ¨ AI-Powered Creative Resume &amp; Portfolio Maker âœ¨ <small style="font-size: 0.5em;">3/15/2025</small></h1>
    </nav>

    <div class="container">
        <!-- Preview Modal -->
<div class="preview-modal" id="previewModal">
    <div class="preview-container">
        <button class="close-preview" onclick="closePreview()">
            <i class="fas fa-times"></i>
        </button>
        
        <div class="preview-controls">
            <div class="preview-size-controls">
                <div class="preview-size">
                    <button class="cute-btn" onclick="setPreviewSize(&#39;desktop&#39;)" title="Desktop View">
                        <i class="fas fa-desktop"></i>
                    </button>
                    <button class="cute-btn" onclick="setPreviewSize(&#39;tablet&#39;)" title="Tablet View">
                        <i class="fas fa-tablet-alt"></i>
                    </button>
                    <button class="cute-btn" onclick="setPreviewSize(&#39;mobile&#39;)" title="Mobile View">
                        <i class="fas fa-mobile-alt"></i>
                    </button>
                </div>
                
                <div class="theme-switcher">
                    <div class="theme-option" style="background: #ffffff;" onclick="changeTheme(&#39;light&#39;)" title="Light Theme"></div>
                    <div class="theme-option" style="background: #2d3436;" onclick="changeTheme(&#39;dark&#39;)" title="Dark Theme"></div>
                    <div class="theme-option" style="background: #f6e58d;" onclick="changeTheme(&#39;warm&#39;)" title="Warm Theme"></div>
                    <div class="theme-option" style="background: #c8d6e5;" onclick="changeTheme(&#39;cool&#39;)" title="Cool Theme"></div>
                </div>
            </div>
            
            <div class="preview-actions">
                <button class="cute-btn" onclick="printPreview()">
                    <i class="fas fa-print"></i> Print
                </button>
                <button class="cute-btn" onclick="exportToPDF(window.lastFormData)">
                    <i class="fas fa-download"></i> Download PDF
                </button>
            </div>
        </div>
        
        <div class="preview-content" id="previewContent"></div>
    </div>
</div>
        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-steps">
                <div class="step active">
                    <div class="step-circle">1</div>
                    <div class="step-text">Choose Template</div>
                </div>
                <div class="step">
                    <div class="step-circle">2</div>
                    <div class="step-text">Fill Details</div>
                </div>
                <div class="step">
                    <div class="step-circle">3</div>
                    <div class="step-text">AI Enhancement</div>
                </div>
                <div class="step">
                    <div class="step-circle">4</div>
                    <div class="step-text">Preview &amp; Download</div>
                </div>
            </div>
        </div>
                <!-- AI Template Suggestions -->
        <div class="ai-suggestions fade-in">
            <h3><i class="fas fa-robot"></i> AI-Suggested Templates</h3>
            <p>Based on your industry and experience level, here are personalized suggestions:</p>
            <div id="aiSuggestions" class="suggestion-container">
            <div class="suggestion-card" onclick="selectTemplate(&#39;tech&#39;)">
                <h4>Tech Professional</h4>
                <p>Optimized for software developers and IT professionals</p>
                <div class="confidence-bar" style="width: 95%"></div>
                <ul>
                    <li>Code snippet support</li><li>GitHub integration</li><li>Technical skills focus</li>
                </ul>
            </div>
        
            <div class="suggestion-card" onclick="selectTemplate(&#39;creative&#39;)">
                <h4>Creative Portfolio</h4>
                <p>Perfect for designers and artists</p>
                <div class="confidence-bar" style="width: 90%"></div>
                <ul>
                    <li>Portfolio gallery</li><li>Visual hierarchy</li><li>Creative layout</li>
                </ul>
            </div>
        
            <div class="suggestion-card" onclick="selectTemplate(&#39;minimal&#39;)">
                <h4>Minimalist</h4>
                <p>Simple and elegant layout</p>
                <div class="confidence-bar" style="width: 85%"></div>
                <ul>
                    <li>Clean design</li><li>Essential information</li><li>Professional tone</li>
                </ul>
            </div>
        </div>
        </div>

        <!-- Profile Picture Section -->
        <div class="profile-picture-container fade-in">
            <h3><i class="fas fa-camera"></i> Profile Picture</h3>
            <img id="profilePreview" src="data:image/svg+xml,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;150&#39; height=&#39;150&#39;%3E%3Crect width=&#39;150&#39; height=&#39;150&#39; fill=&#39;%23f0f0f0&#39;/%3E%3Ctext x=&#39;50%25&#39; y=&#39;50%25&#39; dominant-baseline=&#39;middle&#39; text-anchor=&#39;middle&#39; font-family=&#39;Arial&#39; font-size=&#39;14&#39; fill=&#39;%23333&#39;%3EAdd Photo%3C/text%3E%3C/svg%3E" class="profile-picture-preview" alt="Profile Preview">
            <input type="file" id="profilePicture" class="profile-picture-upload" accept="image/*">
            <label for="profilePicture" class="upload-btn">
                <i class="fas fa-upload"></i> Upload Photo
            </label>
        </div>

        <!-- Template Selection -->
        <div class="template-selection">
            <div class="template-card" onclick="selectTemplate(&#39;modern&#39;)">
                <h3>Modern Professional</h3>
                <p>Clean and contemporary design âœ¨</p>
                <div class="template-preview"></div>
            </div>
            <div class="template-card" onclick="selectTemplate(&#39;creative&#39;)">
                <h3>Creative Portfolio</h3>
                <p>Stand out with unique styling ðŸŽ¨</p>
                <div class="template-preview"></div>
            </div>
            <div class="template-card" onclick="selectTemplate(&#39;minimal&#39;)">
                <h3>Minimalist</h3>
                <p>Simple and elegant layout ðŸŒŸ</p>
                <div class="template-preview"></div>
            </div>
            <div class="template-card" onclick="selectTemplate(&#39;tech&#39;)">
                <h3>Tech Professional</h3>
                <p>Perfect for IT and development roles ðŸ’»</p>
                <div class="template-preview"></div>
            </div>
        </div>

        <!-- Resume Form -->
        <div class="form-container fade-in">
            <form id="resumeForm" onsubmit="generateResume(event)">
                <!-- Personal Information -->
                <div class="form-section">
                    <h3><i class="fas fa-user"></i> Personal Information</h3>
                    <div class="input-group">
                        <label>Full Name</label>
                        <input type="text" id="fullName" required="" placeholder="Your full name">
                    </div>
                    <div class="input-group">
                        <label>Professional Title</label>
                        <input type="text" id="title" placeholder="e.g., Senior Software Engineer">
                    </div>
                    <div class="input-group">
                        <label>Email</label>
                        <input type="email" id="email" required="" placeholder="your.email@example.com">
                    </div>
                    <div class="input-group">
                        <label>Phone</label>
                        <input type="tel" id="phone" required="" placeholder="+1 (234) 567-8900">
                    </div>
                    <div class="input-group">
                        <label>Location</label>
                        <input type="text" id="location" placeholder="City, Country">
                    </div>
                    <div class="input-group">
                        <label>Portfolio Website</label>
                        <input type="url" id="website" placeholder="https://yourportfolio.com">
                    </div>
                    <div class="input-group">
                        <label>LinkedIn</label>
                        <input type="url" id="linkedin" placeholder="https://linkedin.com/in/yourprofile">
                    </div>
                    <div class="input-group">
                        <label>GitHub</label>
                        <input type="url" id="github" placeholder="https://github.com/yourusername">
                    </div>
                </div>

                <!-- Professional Summary -->
                <div class="form-section">
                    <h3><i class="fas fa-star"></i> Professional Summary</h3>
                    <div class="input-group">
                        <label>Summary</label>
                        <textarea id="summary" rows="4" required="" placeholder="Write a compelling summary about your professional background and goals..."></textarea>
                        <button type="button" class="cute-btn" onclick="enhanceWithAI(&#39;summary&#39;)">
                            <i class="fas fa-magic"></i> Enhance with AI
                        </button>
                    </div>
                </div>

                <!-- Dynamic Experience Fields -->
                <div class="form-section">
                    <h3><i class="fas fa-briefcase"></i> Work Experience</h3>
                    <div id="experienceFields"><div class="input-group experience-entry fade-in">
            <div class="experience-header">
                <label>Company Name</label>
                <input type="text" class="company" required="" placeholder="Company Name">
                
                <label>Position</label>
                <input type="text" class="position" required="" placeholder="Job Title">
                
                <label>Duration</label>
                <input type="text" class="duration" required="" placeholder="Jan 2020 - Present">
            </div>
            
            <label>Key Responsibilities &amp; Achievements</label>
            <textarea class="description" rows="3" required="" placeholder="â€¢ Describe your key responsibilities and achievements..."></textarea>
            
            <button type="button" class="cute-btn remove-btn" onclick="this.parentElement.remove()">
                <i class="fas fa-trash"></i> Remove
            </button>
        </div></div>
                    <button type="button" class="cute-btn" onclick="addExperienceField()">
                        <i class="fas fa-plus"></i> Add Experience
                    </button>
                </div>

                <!-- Dynamic Education Fields -->
                <div class="form-section">
                    <h3><i class="fas fa-graduation-cap"></i> Education</h3>
                    <div id="educationFields"><div class="input-group education-entry fade-in">
            <label>Institution</label>
            <input type="text" class="institution" required="" placeholder="University/School Name">
            
            <label>Degree</label>
            <input type="text" class="degree" required="" placeholder="Degree/Certificate Name">
            
            <label>Year</label>
            <input type="text" class="year" required="" placeholder="2018 - 2022">
            
            <label>Achievements/GPA</label>
            <input type="text" class="achievements" placeholder="GPA, Honors, Awards">
            
            <button type="button" class="cute-btn remove-btn" onclick="this.parentElement.remove()">
                <i class="fas fa-trash"></i> Remove
            </button>
        </div></div>
                    <button type="button" class="cute-btn" onclick="addEducationField()">
                        <i class="fas fa-plus"></i> Add Education
                    </button>
                </div>

                <!-- Skills Section -->
                <div class="form-section">
                    <h3><i class="fas fa-tools"></i> Skills</h3>
                    <div class="input-group">
                        <label>Technical Skills</label>
                        <input type="text" id="technicalSkills" placeholder="e.g., JavaScript, Python, Adobe Photoshop (comma-separated)">
                    </div>
                    <div class="input-group">
                        <label>Soft Skills</label>
                        <input type="text" id="softSkills" placeholder="e.g., Leadership, Communication, Team Management (comma-separated)">
                    </div>
                </div>

                <button type="submit" class="cute-btn">
                    <i class="fas fa-magic"></i> Generate Resume
                    <span class="loading" style="display: none;"></span>
                </button>
            </form>
        </div>

        <!-- Preview Section -->
        <div id="preview" class="resume-preview"></div>
    </div>
    <script>
    // Initialize variables
    let currentTemplate = 'modern';
    let profileImage = null;

    // Handle Profile Picture
    document.getElementById('profilePicture').addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(event) {
                profileImage = event.target.result;
                document.getElementById('profilePreview').src = profileImage;
            };
            reader.readAsDataURL(file);
        }
    });

    // Update Progress Function
    function updateProgress(step) {
        const steps = document.querySelectorAll('.step');
        steps.forEach((s, index) => {
            if (index < step) {
                s.classList.add('active');
            } else {
                s.classList.remove('active');
            }
        });
    }

    // Template Selection Function
    function selectTemplate(templateName) {
        currentTemplate = templateName;
        
        // Update visual selection
        document.querySelectorAll('.template-card').forEach(card => {
            card.classList.remove('selected');
        });
        
        const selectedCard = document.querySelector(`.template-card[onclick="selectTemplate('${templateName}')"]`);
        if (selectedCard) {
            selectedCard.classList.add('selected');
        }
        
        // Update progress
        updateProgress(2);
    }

    // AI Template Suggestions
    function generateAISuggestions() {
        const suggestions = [
            {
                id: 'tech',
                name: "Tech Professional",
                description: "Optimized for software developers and IT professionals",
                confidence: 0.95,
                features: ["Code snippet support", "GitHub integration", "Technical skills focus"]
            },
            {
                id: 'creative',
                name: "Creative Portfolio",
                description: "Perfect for designers and artists",
                confidence: 0.90,
                features: ["Portfolio gallery", "Visual hierarchy", "Creative layout"]
            },
            {
                id: 'minimal',
                name: "Minimalist",
                description: "Simple and elegant layout",
                confidence: 0.85,
                features: ["Clean design", "Essential information", "Professional tone"]
            }
        ];

        const container = document.getElementById('aiSuggestions');
        container.innerHTML = suggestions.map(s => `
            <div class="suggestion-card" onclick="selectTemplate('${s.id}')">
                <h4>${s.name}</h4>
                <p>${s.description}</p>
                <div class="confidence-bar" style="width: ${s.confidence * 100}%"></div>
                <ul>
                    ${s.features.map(f => `<li>${f}</li>`).join('')}
                </ul>
            </div>
        `).join('');
    }

    // AI Enhancement Function
    async function enhanceWithAI(fieldId) {
        const element = document.getElementById(fieldId);
        const originalText = element.value;
        
        // Show loading state
        element.disabled = true;
        const button = element.nextElementSibling;
        button.disabled = true;
        button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Enhancing...';
        
        try {
            const enhancedText = await simulateAIEnhancement(originalText);
            element.value = enhancedText;
        } catch (error) {
            console.error('AI Enhancement error:', error);
            alert('Failed to enhance text. Please try again.');
        } finally {
            element.disabled = false;
            button.disabled = false;
            button.innerHTML = '<i class="fas fa-magic"></i> Enhance with AI';
        }
    }

    function simulateAIEnhancement(text) {
        return new Promise(resolve => {
            setTimeout(() => {
                // Add professional keywords and improve structure
                const enhanced = text + "\n\nEnhanced with industry-specific terminology and optimized for ATS systems.";
                resolve(enhanced);
            }, 1500);
        });
    }

    // Dynamic Field Management
    function addExperienceField() {
        const container = document.createElement('div');
        container.className = 'input-group experience-entry fade-in';
        container.innerHTML = `
            <div class="experience-header">
                <label>Company Name</label>
                <input type="text" class="company" required placeholder="Company Name">
                
                <label>Position</label>
                <input type="text" class="position" required placeholder="Job Title">
                
                <label>Duration</label>
                <input type="text" class="duration" required placeholder="Jan 2020 - Present">
            </div>
            
            <label>Key Responsibilities & Achievements</label>
            <textarea class="description" rows="3" required 
                placeholder="â€¢ Describe your key responsibilities and achievements..."></textarea>
            
            <button type="button" class="cute-btn remove-btn" onclick="this.parentElement.remove()">
                <i class="fas fa-trash"></i> Remove
            </button>
        `;
        document.getElementById('experienceFields').appendChild(container);
    }

    function addEducationField() {
        const container = document.createElement('div');
        container.className = 'input-group education-entry fade-in';
        container.innerHTML = `
            <label>Institution</label>
            <input type="text" class="institution" required placeholder="University/School Name">
            
            <label>Degree</label>
            <input type="text" class="degree" required placeholder="Degree/Certificate Name">
            
            <label>Year</label>
            <input type="text" class="year" required placeholder="2018 - 2022">
            
            <label>Achievements/GPA</label>
            <input type="text" class="achievements" placeholder="GPA, Honors, Awards">
            
            <button type="button" class="cute-btn remove-btn" onclick="this.parentElement.remove()">
                <i class="fas fa-trash"></i> Remove
            </button>
        `;
        document.getElementById('educationFields').appendChild(container);
    }

    // Form Data Collection
    function collectFormData() {
        return {
            personal: {
                fullName: document.getElementById('fullName').value,
                title: document.getElementById('title').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                location: document.getElementById('location').value,
                website: document.getElementById('website').value,
                linkedin: document.getElementById('linkedin').value,
                github: document.getElementById('github').value
            },
            profileImage: profileImage,
            summary: document.getElementById('summary').value,
            experience: Array.from(document.querySelectorAll('.experience-entry')).map(exp => ({
                company: exp.querySelector('.company').value,
                position: exp.querySelector('.position').value,
                duration: exp.querySelector('.duration').value,
                description: exp.querySelector('.description').value
            })),
            education: Array.from(document.querySelectorAll('.education-entry')).map(edu => ({
                institution: edu.querySelector('.institution').value,
                degree: edu.querySelector('.degree').value,
                year: edu.querySelector('.year').value,
                achievements: edu.querySelector('.achievements').value
            })),
            skills: {
                technical: document.getElementById('technicalSkills').value.split(',').map(s => s.trim()),
                soft: document.getElementById('softSkills').value.split(',').map(s => s.trim())
            }
        };
    }

    // Resume Generation
    async function generateResume(event) {
        event.preventDefault();
        
        // Basic form validation
        const requiredFields = ['fullName', 'email', 'phone'];
        const missingFields = requiredFields.filter(field => 
            !document.getElementById(field).value.trim()
        );
        
        if (missingFields.length > 0) {
            alert(`Please fill in the following required fields: ${missingFields.join(', ')}`);
            return;
        }
        
        const formData = collectFormData();
        const preview = document.getElementById('preview');
        
        // Show loading state
        const loadingSpan = document.querySelector('.loading');
        loadingSpan.style.display = 'inline-block';
        
        try {
            const template = await generateTemplateHTML(formData);
            preview.innerHTML = template;
            
            // Add download button
            const downloadBtn = document.createElement('button');
            downloadBtn.className = 'cute-btn download-btn';
            downloadBtn.innerHTML = '<i class="fas fa-download"></i> Download PDF';
            downloadBtn.onclick = () => exportToPDF(formData);
            preview.appendChild(downloadBtn);
            
            // Update progress
            updateProgress(4);
        } catch (error) {
            console.error('Error generating resume:', error);
            preview.innerHTML = '<p class="error">Error generating resume. Please try again.</p>';
        } finally {
            loadingSpan.style.display = 'none';
        }
    }
    // Template Generation Function
async function generateTemplateHTML(formData) {
    // Template styles
    const styles = `
        <style>
            .resume-modern {
                max-width: 800px;
                margin: 0 auto;
                padding: 40px;
                font-family: 'Poppins', sans-serif;
                line-height: 1.6;
            }
            .resume-modern header {
                text-align: center;
                margin-bottom: 40px;
            }
            .resume-modern .profile-img {
                width: 150px;
                height: 150px;
                border-radius: 50%;
                margin: 0 auto 20px;
                display: block;
                border: 3px solid #6c5ce7;
            }
            .resume-modern h1 {
                color: #2d3436;
                margin-bottom: 10px;
            }
            .resume-modern h2 {
                color: #6c5ce7;
                font-size: 1.2em;
                margin-bottom: 20px;
            }
            .resume-modern .contact-info {
                display: flex;
                justify-content: center;
                flex-wrap: wrap;
                gap: 20px;
                margin-bottom: 30px;
            }
            .resume-modern .contact-info p {
                display: flex;
                align-items: center;
                gap: 8px;
            }
            .resume-modern section {
                margin-bottom: 30px;
            }
            .resume-modern h3 {
                color: #6c5ce7;
                border-bottom: 2px solid #6c5ce7;
                padding-bottom: 5px;
                margin-bottom: 15px;
            }
            .resume-modern .experience-item,
            .resume-modern .education-item {
                margin-bottom: 20px;
            }
            .resume-modern h4 {
                color: #2d3436;
                margin-bottom: 5px;
            }
            .resume-modern h5 {
                color: #636e72;
                font-size: 0.9em;
                margin-bottom: 10px;
            }
            .resume-modern .skills {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 20px;
            }
            @media print {
                .resume-modern {
                    padding: 20px;
                }
                .download-btn {
                    display: none;
                }
            }
        </style>
    `;

    const templates = {
        modern: `
            ${styles}
            <div class="resume-modern">
                <header>
                    ${formData.profileImage ? `<img src="${formData.profileImage}" alt="Profile" class="profile-img">` : ''}
                    <h1>${formData.personal.fullName}</h1>
                    <h2>${formData.personal.title || ''}</h2>
                    <div class="contact-info">
                        <p><i class="fas fa-envelope"></i> ${formData.personal.email}</p>
                        <p><i class="fas fa-phone"></i> ${formData.personal.phone}</p>
                        ${formData.personal.location ? `<p><i class="fas fa-map-marker-alt"></i> ${formData.personal.location}</p>` : ''}
                        ${formData.personal.website ? `<p><i class="fas fa-globe"></i> <a href="${formData.personal.website}" target="_blank">Portfolio</a></p>` : ''}
                        ${formData.personal.linkedin ? `<p><i class="fab fa-linkedin"></i> <a href="${formData.personal.linkedin}" target="_blank">LinkedIn</a></p>` : ''}
                        ${formData.personal.github ? `<p><i class="fab fa-github"></i> <a href="${formData.personal.github}" target="_blank">GitHub</a></p>` : ''}
                    </div>
                </header>

                <section class="summary">
                    <h3>Professional Summary</h3>
                    <p>${formData.summary}</p>
                </section>

                <section class="experience">
                    <h3>Professional Experience</h3>
                    ${formData.experience.map(exp => `
                        <div class="experience-item">
                            <h4>${exp.position}</h4>
                            <h5>${exp.company} | ${exp.duration}</h5>
                            <p>${exp.description}</p>
                        </div>
                    `).join('')}
                </section>

                <section class="education">
                    <h3>Education</h3>
                    ${formData.education.map(edu => `
                        <div class="education-item">
                            <h4>${edu.degree}</h4>
                            <h5>${edu.institution} | ${edu.year}</h5>
                            ${edu.achievements ? `<p>${edu.achievements}</p>` : ''}
                        </div>
                    `).join('')}
                </section>

                <section class="skills">
                    <div class="technical-skills">
                        <h3>Technical Skills</h3>
                        <p>${formData.skills.technical.join(', ') || 'N/A'}</p>
                    </div>
                    <div class="soft-skills">
                        <h3>Soft Skills</h3>
                        <p>${formData.skills.soft.join(', ') || 'N/A'}</p>
                    </div>
                </section>
            </div>
        `,
        // Add other templates here (creative, minimal, tech)
        creative: `
            ${styles}
            <div class="resume-modern creative">
                <!-- Similar structure to modern template but with different styling -->
            </div>
        `,
        minimal: `
            ${styles}
            <div class="resume-modern minimal">
                <!-- Similar structure to modern template but with minimal styling -->
            </div>
        `,
        tech: `
            ${styles}
            <div class="resume-modern tech">
                <!-- Similar structure to modern template but with tech-focused styling -->
            </div>
        `
    };

    // Return the selected template or fallback to modern
    return templates[currentTemplate] || templates.modern;
}

// PDF Export Function
async function exportToPDF(formData) {
    const element = document.getElementById('previewContent');
    
    // Create a clone of the content to avoid modifying the original
    const contentClone = element.cloneNode(true);
    
    const opt = {
        margin: [10, 10],
        filename: `${formData.personal.fullName.replace(/\s+/g, '_')}_resume.pdf`,
        image: { 
            type: 'jpeg', 
            quality: 1.0 
        },
        html2canvas: { 
            scale: 2,
            useCORS: true,
            logging: false, // Disable logging
            letterRendering: true,
            windowWidth: 1200,
        },
        jsPDF: { 
            unit: 'mm',
            format: 'a4',
            orientation: 'portrait',
            compress: true
        },
        pagebreak: { mode: ['avoid-all', 'css', 'legacy'] }
    };
    try {
        // Show loading state
        const downloadBtn = document.querySelector('.download-btn');
        if (downloadBtn) {
            downloadBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating PDF...';
            downloadBtn.disabled = true;
        }

        await html2pdf().set(opt).from(element).save();
    } catch (error) {
        console.error('Error exporting PDF:', error);
        alert('Error exporting PDF. Please try again.');
    } finally {
        // Reset download button
        const downloadBtn = document.querySelector('.download-btn');
        if (downloadBtn) {
            downloadBtn.innerHTML = '<i class="fas fa-download"></i> Download PDF';
            downloadBtn.disabled = false;
        }
    }
}
    // Initialize the application
    document.addEventListener('DOMContentLoaded', function() {
        addExperienceField(); // Add first experience field
        addEducationField();  // Add first education field
        generateAISuggestions(); // Generate AI suggestions
        updateProgress(1); // Set initial progress
        
        // Add current date to the form
        const currentDate = new Date('2025-03-15T13:53:21Z').toLocaleDateString();
        document.querySelector('nav h1').innerHTML += ` <small style="font-size: 0.5em;">${currentDate}</small>`;
    });
    // Preview Functions
let currentPreviewSize = 'desktop';
let currentTheme = 'light';

function showPreview(formData) {
    const modal = document.getElementById('previewModal');
    const content = document.getElementById('previewContent');
    
    // Store form data for PDF generation
    window.lastFormData = formData;
    
    // Generate and display content
    generateTemplateHTML(formData).then(html => {
        content.innerHTML = html;
        modal.style.display = 'block';
        document.body.style.overflow = 'hidden';
        
        // Set initial preview size and theme
        setPreviewSize(currentPreviewSize);
        changeTheme(currentTheme);
    });
}

function closePreview() {
    const modal = document.getElementById('previewModal');
    modal.style.display = 'none';
    document.body.style.overflow = 'auto';
}

function setPreviewSize(size) {
    currentPreviewSize = size;
    const content = document.getElementById('previewContent');
    
    // Remove all size classes
    content.classList.remove('size-desktop', 'size-tablet', 'size-mobile');
    
    // Add new size class
    content.classList.add(`size-${size}`);
    
    // Update active button state
    document.querySelectorAll('.preview-size button').forEach(btn => {
        btn.classList.remove('active');
    });
    document.querySelector(`.preview-size button[onclick*="${size}"]`).classList.add('active');
}

function changeTheme(theme) {
    currentTheme = theme;
    const content = document.getElementById('previewContent');
    
    // Define theme styles
    const themes = {
        light: {
            background: '#ffffff',
            color: '#2d3436',
            primary: '#6c5ce7'
        },
        dark: {
            background: '#2d3436',
            color: '#ffffff',
            primary: '#a8a4e6'
        },
        warm: {
            background: '#f6e58d',
            color: '#2d3436',
            primary: '#e17055'
        },
        cool: {
            background: '#c8d6e5',
            color: '#2d3436',
            primary: '#0984e3'
        }
    };
    
    // Apply theme
    const selectedTheme = themes[theme];
    content.style.setProperty('--background-color', selectedTheme.background);
    content.style.setProperty('--text-color', selectedTheme.color);
    content.style.setProperty('--primary-color', selectedTheme.primary);
    
    // Update active theme option
    document.querySelectorAll('.theme-option').forEach(option => {
        option.classList.remove('active');
    });
    document.querySelector(`.theme-option[onclick*="${theme}"]`).classList.add('active');
}

function printPreview() {
    window.print();
}

// Modify the generateResume function to use the new preview
async function generateResume(event) {
    event.preventDefault();
    
    // Basic form validation
    const requiredFields = ['fullName', 'email', 'phone'];
    const missingFields = requiredFields.filter(field => 
        !document.getElementById(field).value.trim()
    );
    
    if (missingFields.length > 0) {
        alert(`Please fill in the following required fields: ${missingFields.join(', ')}`);
        return;
    }
    
    const formData = collectFormData();
    
    // Show loading state
    const submitBtn = event.target.querySelector('button[type="submit"]');
    const loadingSpan = submitBtn.querySelector('.loading');
    loadingSpan.style.display = 'inline-block';
    
    try {
        // Show preview modal with form data
        showPreview(formData);
        
        // Update progress
        updateProgress(4);
    } catch (error) {
        console.error('Error generating resume:', error);
        alert('Error generating resume. Please try again.');
    } finally {
        loadingSpan.style.display = 'none';
    }
}

// Close preview modal when clicking outside
document.addEventListener('click', function(event) {
    const modal = document.getElementById('previewModal');
    if (event.target === modal) {
        closePreview();
    }
});

// Handle escape key to close preview
document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape') {
        closePreview();
    }
});
</script>

</body></html>